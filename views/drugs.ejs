<%- include('partials/header') %>

<style>
    .drug-page-container {
        padding: 4rem 2rem;
        max-width: 900px;
        margin: 40px auto;
        background-color: #fff;
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    }
    .drug-title {
        font-family: 'Great Vibes', cursive;
        color: var(--primary-color);
        font-size: 4rem;
        text-align: center;
        margin-bottom: 1rem;
        text-transform: capitalize;
    }
    .drug-subtitle {
        text-align: center;
        font-style: italic;
        color: #666;
        margin-bottom: 2.5rem;
    }
    .drug-card {
        background-color: var(--background-color);
        border-radius: 10px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        border-left: 5px solid var(--primary-color);
    }
    .drug-card h4 {
        font-family: 'Poppins', sans-serif;
        color: var(--secondary-color);
        margin-bottom: 0.5rem;
        font-weight: 600;
    }
    .drug-card p {
        white-space: pre-line; /* Helps format long text blocks */
    }
     .back-link {
        display: inline-block;
        margin-top: 2rem;
        text-decoration: none;
        color: var(--secondary-color);
        font-weight: 600;
    }
    .back-link:hover {
        color: var(--primary-color);
    }
    .error-message {
        text-align: center;
    }
</style>

<div class="drug-page-container">
    <% if (drugData && drugData.results && drugData.results.length > 0) { %>
        <% const drug = drugData.results[0]; %>
        <h1 class="drug-title"><%= searchTerm %></h1>
        <p class="drug-subtitle">Information based on official drug labels from the openFDA database.</p>

        <div class="drug-card">
            <h4>Brand Name(s)</h4>
            <p><%= drug.openfda.brand_name ? drug.openfda.brand_name.join(', ') : 'Not Available' %></p>
        </div>

        <div class="drug-card">
            <h4>Generic Name</h4>
            <p><%= drug.openfda.generic_name ? drug.openfda.generic_name.join(', ') : 'Not Available' %></p>
        </div>

        <div class="drug-card">
            <h4>Primary Use (Indications)</h4>
            <p><%= drug.indications_and_usage ? drug.indications_and_usage[0].substring(0, 400) + '...' : 'Not Available' %></p>
        </div>

        <div class="drug-card">
            <h4>Warnings</h4>
            <p><%= drug.warnings ? drug.warnings[0].substring(0, 400) + '...' : 'Always consult a doctor for warnings.' %></p>
        </div>

    <% } else { %>
        <div class="error-message">
            <h1 class="drug-title">Sorry!</h1>
            <p class="drug-subtitle">We could not find any official information for "<%= searchTerm %>". Please check the spelling or try another medicine.</p>
        </div>
    <% } %>

    <a href="/#medicine" class="back-link">&larr; Back to Medicine Saathi</a>
</div>

<%- include('partials/footer') %>


